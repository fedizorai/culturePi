<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <title>Culture Vibes!</title>
  <!-- Bootstrap core CSS -->
  <link href="{{asset('vendor/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">
  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="{{asset('css/fontawesome.css')}}">
  <link rel="stylesheet" href="{{asset('css/templatemo-woox-travel.css')}}">
  <link rel="stylesheet" href="{{asset('css/owl.css')}}">
  <link rel="stylesheet" href="{{asset('css/animate.css')}}">
  <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css')}}" />
</head>

<body>

  <header class="header-area header-sticky">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <a href="index.html" class="logo">
              <img src="{{ asset('images/logo.png') }}" alt="" style="width: 100px; height: 55px;">
            </a>

            <ul class="nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="deals.html" class="active">Deals</a></li>
              <li>
                <a href="{{ path('app_reservation_new') }}">Reservation</a>
              </li>
              <li><a href="reservation.html">Book Yours</a></li>
            </ul>
            <a class='menu-trigger'>
              <span>Menu</span>
            </a>
          </nav>
        </div>
      </div>
    </div>
  </header>

  <div class="page-heading">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <h4>Découvrez nos incroyables offres de voyage</h4>
          <h2>Des prix étonnants</h2>
        </div>
      </div>
    </div>
  </div>
 <div class="search-form">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <form id="search-form" name="gs" method="submit" role="search" action="javascript:void(0);">
            <div class="row">
              <div class="col-lg-2">
                <h4>Search By Location:</h4>
              </div>
              <div class="col-lg-4">
                <fieldset>
                  <input type="text" name="Location" class="form-control" placeholder="Enter Location" id="inputLocation">
                </fieldset>
              </div>
              <div class="col-lg-4">
                
              </div>
              <div class="col-lg-2">
                <fieldset>
                  <button class="border-button" type="button" onclick="searchVoyages()">Search Results</button>
                </fieldset>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="amazing-deals">
    <div class="container">
      <div class="row">
        <div class="col-lg-6 offset-lg-3">
          <div class="section-heading text-center">
            <h2>Meilleures offres dans chaque ville</h2>
            <p>Découvrez nos voyages économiques et premium à travers notre liste de voyages</p>
          </div>
        </div>
      </div>
      <div class="row" id="voyagesList">
        {% for voyage in voyages %}
        <div class="col-lg-6 col-sm-6">
          <div class="item">
            <div class="row">
              <div class="col-lg-6">
                <div class="image">
                  <img src="{{ asset('voyageImages/' ~ voyage.voyageimage) }}" alt="{{ voyage.title }}">
                </div>
              </div>
              <div class="col-lg-6 align-self-center">
                <div class="content">
                  <span class="info">*Limited Offer Today</span>
                  <h4>{{ voyage.title }}</h4>
                  <div class="row">
                    <div class="col-6">
                      <i class="fa fa-clock"></i>
                      <span class="list">{{ voyage.duration }} Days</span>   
                    </div>
                    <div class="col-6">
                      <i class="fa fa-map"></i>
                      <span class="list">{{ voyage.location }}</span>
                    </div>
                    
                  </div>
                  <h6><i class="fa fa-dollar-sign"> {{ voyage.budget }}</i></h6>
                  <p>{{ voyage.description }}</p>
                  <div class="main-button">
  <a href="{{ path('app_reservation_new', {'id': voyage.id}) }}" style="color: #ffffff;">Make a Reservation</a>
</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}

          <div class="col-lg-12">
           <ul class="page-numbers" id="pagination">
           
          </ul>
        </div>
        <div class="container">
    <div class="row">
        <div class="col-lg-3 mx-auto mt-5 text-center">
            <a href="{{ path('app_reservation_showres') }}" class="btn btn-outline-primary m-1">->See your Reservations Here</a>
        </div>
    </div>
      </div>
    </div>
  </div>

  <div class="call-to-action">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <h2>Are You Looking To Travel ?</h2>
          <h4>Make A Reservation By Clicking The Button</h4>
        </div>
        <div class="col-lg-4">
          <div class="border-button">
            <a href="reservation.html">Book Yours Now</a>
          </div>
        </div>
      </div>
    </div>
    
  </div>

  <!-- Scripts -->
  <script src="{{ asset('vendor/jquery/jquery.min.js') }}"></script>
  <script src="{{ asset('vendor/bootstrap/js/bootstrap.min.js') }}"></script>
  <script src="{{ asset('js/isotope.min.js') }}"></script>
  <script src="{{ asset('js/owl-carousel.js') }}"></script>
  <script src="{{ asset('js/wow.js') }}"></script>
  <script src="{{ asset('js/tabs.js') }}"></script>
  <script src="{{ asset('js/popup.js') }}"></script>
  <script src="{{ asset('js/custom.js') }}"></script>

 <script>
    function searchVoyages() {
        // Get the input values
        var searchQuery = document.getElementById('inputLocation').value.toLowerCase();

        // Get the list of voyages
        var voyages = document.getElementById('voyagesList').getElementsByClassName('item');

        // Loop through voyages and show/hide based on the search query
        for (var i = 0; i < voyages.length; i++) {
            var voyageTitle = voyages[i].getElementsByClassName('content')[0].getElementsByTagName('h4')[0].innerText.toLowerCase();

            // Check if the title includes the search query
            var isVisible = voyageTitle.includes(searchQuery);

            // Show/hide the voyage based on the search result
            voyages[i].style.display = isVisible ? 'block' : 'none';
        }
    }
     const voyagesPerPage = 6;
    const totalVoyages = document.querySelectorAll('.item').length;
    const totalPages = Math.ceil(totalVoyages / voyagesPerPage);

    // Function to display voyages for the selected page
    function showVoyages(pageNumber) {
        $(".item").hide();
        const startIndex = (pageNumber - 1) * voyagesPerPage;
        const endIndex = startIndex + voyagesPerPage;
        $(".item").slice(startIndex, endIndex).show();
    }

    // Function to generate pagination buttons
    function generatePaginationButtons() {
        $("#pagination").append(`<li><a href="#" class="page-number" data-page="prev"><i class="fa fa-arrow-left"></i></a></li>`);
        for (let i = 1; i <= totalPages; i++) {
            $("#pagination").append(`<li><a href="#" class="page-number">${i}</a></li>`);
        }
        $("#pagination").append(`<li><a href="#" class="page-number" data-page="next"><i class="fa fa-arrow-right"></i></a></li>`);
    }

    // Initial setup
    generatePaginationButtons();
    showVoyages(1); // Show the first page initially

    // Handle click events on pagination buttons
    $(".page-number").click(function (e) {
        e.preventDefault();
        const clickedPage = $(this).data("page");
        if (clickedPage === "prev") {
            const currentPage = $(".page-number.active").text();
            if (currentPage > 1) {
                showVoyages(parseInt(currentPage) - 1);
            }
        } else if (clickedPage === "next") {
            const currentPage = $(".page-number.active").text();
            if (currentPage < totalPages) {
                showVoyages(parseInt(currentPage) + 1);
            }
        } else {
            const pageNumber = parseInt($(this).text());
            showVoyages(pageNumber);
        }
    });
</script>

</body>

</html>
